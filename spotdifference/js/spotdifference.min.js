var SpotDifference,bind=function(a,b){return function(){return a.apply(b,arguments)}};SpotDifference=function(){function a(a){null==a&&(a={}),this.removeTargets=bind(this.removeTargets,this),this.options={original_image_div:null,original_map_name:null,image_div:"#findimage",map_name:"mapname",map_name:"mapname",class_mark:"mark",onLoad:function(a){},onStart:function(){},onFind:function(a,b){},onEnd:function(a){}},this.differences=0,this.start_time=!1,this.options=$.extend(this.options,a),this.initialize()}return a.prototype.initialize=function(){return this.differences=$("map[name="+this.options.map_name+"] area").length,$("img[usemap]").rwdImageMaps(),$(this.options.image_div).css("position","relative"),$("map[name="+this.options.map_name+"] area").on("click",function(a){return function(b){b.preventDefault(),a.addMark(b),a.removeTargets(b),a.finded($(b.target))}}(this)),this.options.original_map_name&&$("map[name="+this.options.original_map_name+"] area").on("click",function(a){return function(b){b.preventDefault(),a.addMark(b),a.removeTargets(b),a.finded($(b.target))}}(this)),this.options.onLoad(this.differences),this.start_time=(new Date).getTime()},a.prototype.removeTargets=function(a){var b;return b=$(a.target).attr("coords"),$("area[coords='"+b+"']").each(function(a){return function(a,b){return b.remove()}}(this))},a.prototype.finded=function(a){var b;if(this.options.onFind(this.differences-$("map[name="+this.options.map_name+"] area").length,this.differences,a),$("map[name="+this.options.map_name+"] area").length<=0)return b=(new Date).getTime(),this.options.onEnd((b-this.start_time)/1e3)},a.prototype.addMark=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(c=$(a.target),b=c.attr("coords").split(","),h=parseInt(b[0]),k=parseInt(b[1]),i=parseInt(b[2]),l=parseInt(b[3]),g=h,j=k,f=i-h,d=l-k,e=$("<i />").addClass(this.options.class_mark),e.css("position","absolute"),e.css("top",j),e.css("left",g),e.css("width",f+"px"),e.css("height",d+"px"),$(this.options.image_div).append(e),this.options.original_image_div)return $(this.options.original_image_div).append(e.clone())},a}();